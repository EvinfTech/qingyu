{"version":3,"sources":["uni-app:///main.js","webpack:///C:/project/轻羽开源项目客户端/qingyu/pages/confirmAppointment/confirmAppointment.vue?a2db","webpack:///C:/project/轻羽开源项目客户端/qingyu/pages/confirmAppointment/confirmAppointment.vue?8cb0","webpack:///C:/project/轻羽开源项目客户端/qingyu/pages/confirmAppointment/confirmAppointment.vue?39b0","webpack:///C:/project/轻羽开源项目客户端/qingyu/pages/confirmAppointment/confirmAppointment.vue?7c2b","uni-app:///pages/confirmAppointment/confirmAppointment.vue","webpack:///C:/project/轻羽开源项目客户端/qingyu/pages/confirmAppointment/confirmAppointment.vue?0b31"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uNavbar","uIcon","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","g0","_self","_c","sessionList","length","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","mixins","PaymentMethod","app","centerHeight","orderInfo","gymnasiumInfo","userName","phone","remark","userInfo","show","order_no","showPop","payMoney","onLoad","enumInfo","site_detail","con","timeList","date","timeRange","hour","price","siteName","onReady","onShow","methods","toBackPage","calculate","createOrder","url","method","user_ouid","gmt_site_use","reserve_name","reserve_phone","uni","title","icon","setTimeout","eventChannel","cancelPay","toEnsurePay","index","state","duration","success","balancePayment","resolve","confirm","type","cancel","payComplete"],"mappings":"sKAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,kDACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,QAAS,WACP,OAAO,sHAITC,MAAO,WACL,OAAO,mHAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,YAAYC,QACzBR,EAAIS,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLT,GAAIA,MAKRU,GAAmB,EACnBC,EAAkB,GACtBhB,EAAOiB,eAAgB,G,iCC/CvB,yHAAy3B,eAAG,G,qJCsF53B,SAQA,YADA,sJAGA,CACAC,mBACA1B,YACA2B,iBAEAR,gBACA,OACAS,SACAC,eACAC,aACAC,iBACAC,YACAC,SACAC,UACAC,YACAnB,eACAoB,QACAC,YACAC,WACAC,aAGAC,kBAAA,gJAIA,OAHA,eACAV,gCACAA,gBACA,uBACA,mEACA,8DACA,wBAAAW,SACA,2BACA,yBACAzB,KACA0B,gBACAA,uBACA,SACAC,iCACAC,QACAC,oBACAC,oBAGA9B,QACA+B,wBACAC,cACAC,qBACAL,gBAGA,2DA3BA,IA6BAM,mBAAA,WACA,2BACA,kBAGAC,oBA0BAC,SACAC,sBACA,mBAEAC,qBACA,4BACA,iBAMA,2CAIAC,uBAAA,YACA,cACAC,mBACAC,cACAtC,MACAuC,6BAEAhB,uCACAiB,yCACAC,2BACAC,yBACA3B,sBAEA,kBACA,eACA,wBACA,4BACA,eAEA4B,aACAC,mBACAC,cAEAC,uBACA,gCACAC,qCACAD,uBACA,iBACA,OACA,WAQAE,qBACA,gBACA,gBACAL,iCACAA,cACAN,+CACA,6BAIAY,wBAAA,6IACAC,MAAA,+BACA,0BAAAC,SACA,IACA,aACAR,aACAC,aACAC,YACAO,aACAC,mBACA,aACAP,uBACAH,iCACAA,cACAN,+CACA,2BAEA,SAKA,sBAEA,aACA,sDAzBA,IA6BAiB,0BAAA,WACA,mCACA,cACAjB,qBACAC,cACAtC,MACAkB,oBACAqB,6BAEA,kBACA,aACAgB,aAOAC,mBAAA,WACA,SAIA,cACAnB,aACAC,cACAtC,MACAkB,uBACAuC,UAEA,kBAGA,0CAuBAC,kBACA,aACAf,iCACAA,cACAN,4EAIAsB,wBAAA,WACAhB,aACAC,iCACAC,YACAO,aACAC,mBACAP,uBACAH,iCACAA,cACAN,+CACA,2BAEA,WAOA,c,6DCjWA,yHAAwwC,eAAG,G","file":"pages/confirmAppointment/confirmAppointment.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/confirmAppointment/confirmAppointment.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./confirmAppointment.vue?vue&type=template&id=f2065834&scoped=true&\"\nvar renderjs\nimport script from \"./confirmAppointment.vue?vue&type=script&lang=js&\"\nexport * from \"./confirmAppointment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./confirmAppointment.vue?vue&type=style&index=0&id=f2065834&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f2065834\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/confirmAppointment/confirmAppointment.vue\"\nexport default component.exports","export * from \"-!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./confirmAppointment.vue?vue&type=template&id=f2065834&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-navbar/u-navbar\" */ \"uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.sessionList.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./confirmAppointment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./confirmAppointment.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page\">\r\n\t\t<u-navbar class=\"nav-bar\" :safeAreaInsetTop=\"true\" :fixed=\"false\" title=\"确认预约\" :autoBack=\"false\">\r\n\t\t\t<template #left>\r\n\t\t\t\t<u-icon name=\"arrow-left\" @click=\"toBackPage\"></u-icon>\r\n\t\t\t</template>\r\n\t\t</u-navbar>\r\n\t\t<view class=\"centerContent\" :style=\"'height: ' + (centerHeight + 'px') + ';'\">\r\n\t\t\t<view class=\"reservationInfo\">\r\n\t\t\t\t<view class=\"reservationInfoTitle\">\r\n\t\t\t\t\t预约信息\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex align-center\" style=\"margin-top: 11px;\">\r\n\t\t\t\t\t<view class=\"commonInfoLabel\">姓名</view>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"预约人姓名\" v-model=\"userName\">\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex align-center\" style=\"margin-top: 11px;\">\r\n\t\t\t\t\t<view class=\"commonInfoLabel\">手机</view>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"预约人手机号码\" v-model=\"phone\">\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex align-center\" style=\"margin-top: 11px;\">\r\n\t\t\t\t\t<view class=\"commonInfoLabel\">备注</view>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"备注信息\" v-model=\"remark\">\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"gymnasiumInfoBox\">\r\n\t\t\t\t<view class=\"gymnasiumInfoBoxName\">{{gymnasiumInfo.gymnasiumName}}</view>\r\n\t\t\t\t<view class=\"gymnasiumInfoBoxText\">营业时间：{{gymnasiumInfo.businessHours}}</view>\r\n\t\t\t\t<view class=\"gymnasiumInfoBoxText\">电话：{{gymnasiumInfo.phone}}</view>\r\n\t\t\t\t<view class=\"gymnasiumInfoBoxText\">地址：{{gymnasiumInfo.location}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"siteList\">\r\n\t\t\t\t<view class=\"siteListTitle\">预约场次</view>\r\n\t\t\t\t<view style=\"padding: 0 30rpx\">\r\n\t\t\t\t\t<view class=\"siteListItem\" v-for=\"(item, index) in sessionList\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"flex align-center justify-between\">\r\n\t\t\t\t\t\t\t<view class=\"blackText\">\r\n\t\t\t\t\t\t\t\t{{ item.siteName }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"grayText\">{{ item.hour }}小时</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"flex align-center justify-between\" style=\"margin-top: 12rpx\">\r\n\t\t\t\t\t\t\t<view class=\"flex flex-direction\">\r\n\t\t\t\t\t\t\t\t<view class=\"grayText\" v-for=\"(con, j) in item.timeList\" :key=\"j\">\r\n\t\t\t\t\t\t\t\t\t<text>{{ con.date }} {{ con.timeRange }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"blackText\">￥ {{ item.price/100 }}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex align-center justify-between\" style=\"padding: 24rpx 20rpx 16rpx\">\r\n\t\t\t\t\t<view class=\"methodText\">小计(共{{ sessionList.length }}场)</view>\r\n\t\t\t\t\t<view class=\"priceText\">￥{{orderInfo.totalPrice }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex align-center justify-between payMethodBox\">\r\n\t\t\t\t<view class=\"methodText\">支付方式</view>\r\n\t\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t\t<image src=\"/static/images/order/wechatIcon.svg\" mode=\"\"\r\n\t\t\t\t\t\tstyle=\"width: 36rpx; height: 36rpx; margin-right: 8rpx\" />\r\n\t\t\t\t\t<text class=\"wechatText\">微信支付</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"footer\">\r\n\t\t\t<view class=\"flex align-center justify-between h-full\">\r\n\t\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t\t<view class=\"totalText\">总计：</view>\r\n\t\t\t\t\t<view class=\"priceText\">\r\n\t\t\t\t\t\t<text>￥</text>\r\n\t\t\t\t\t\t<text>{{ orderInfo.totalPrice }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex align-center justify-end\">\r\n\t\t\t\t\t<view class=\"payBtn\" @click=\"createOrder\">确认支付</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<PaymentMethod :show=\"showPop\" :price=\"payMoney\" @toEnsurePay=\"toEnsurePay\" @cancelPay=\"cancelPay\">\r\n\t\t</PaymentMethod>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\trequest\r\n\t} from '../../utils/request';\r\n\t// 引入weixin-js-sdk\r\n\t// #ifdef H5\r\n\timport * as jweixin from 'weixin-js-sdk'\r\n\t// #endif\r\n\t// 引入支付混入\r\n\timport payment from '@/mixins/pay.js';\r\n\timport PaymentMethod from '@/components/paymentMethod.vue'\r\n\texport default {\r\n\t\tmixins: [payment],\r\n\t\tcomponents: {\r\n\t\t\tPaymentMethod\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tapp: null,\r\n\t\t\t\tcenterHeight: 0,\r\n\t\t\t\torderInfo: {},\r\n\t\t\t\tgymnasiumInfo: {},\r\n\t\t\t\tuserName: '',\r\n\t\t\t\tphone: '',\r\n\t\t\t\tremark: '',\r\n\t\t\t\tuserInfo: {},\r\n\t\t\t\tsessionList: [],\r\n\t\t\t\tshow: false,\r\n\t\t\t\torder_no: '',\r\n\t\t\t\tshowPop: false,\r\n\t\t\t\tpayMoney: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onLoad() {\r\n\t\t\tthis.app = getApp()\r\n\t\t\tlet orderInfo = uni.getStorageSync('orderInfo')\r\n\t\t\torderInfo = JSON.parse(orderInfo)\r\n\t\t\tthis.orderInfo = orderInfo;\r\n\t\t\tthis.gymnasiumInfo = await this.app.getStoreInfo()\r\n\t\t\tthis.userInfo = await this.app.getUserInfo()\r\n\t\t\tlet enumInfo = await this.app.getEnum();\r\n\t\t\tthis.userName = this.userInfo.name;\r\n\t\t\tthis.phone = this.userInfo.phone;\r\n\t\t\tlet sessionList = []\r\n\t\t\tlet site_detail = orderInfo.site_detail\r\n\t\t\tsite_detail.forEach((con) => {\r\n\t\t\t\tlet timeList = [];\r\n\t\t\t\tcon.time_enum.forEach((content) => {\r\n\t\t\t\t\ttimeList.push({\r\n\t\t\t\t\t\tdate: orderInfo.gmt_site_use,\r\n\t\t\t\t\t\ttimeRange: enumInfo[content]\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tsessionList.push({\r\n\t\t\t\t\thour: con.time_enum.length,\r\n\t\t\t\t\tprice: con.money,\r\n\t\t\t\t\tsiteName: con.site_name,\r\n\t\t\t\t\ttimeList: timeList\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.sessionList = sessionList;\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.calculate();\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// #ifdef H5\r\n\t\t\t// 微信内置浏览器且code存在\r\n\t\t\tlet flag = this.isWeiXin()\r\n\t\t\tif (flag) {\r\n\t\t\t\tconst code = this.getUrlParam(\"code\")\r\n\t\t\t\tif (code) {\r\n\t\t\t\t\tthis.toPayInside()\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tlet payState = uni.getStorageSync('weixinCallback')\r\n\t\t\t\tif (payState) {\r\n\t\t\t\t\tuni.removeStorageSync('weixinCallback')\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\turl: '/pages/orderDetail/orderDetail?order_no=' +\r\n\t\t\t\t\t\t\t\tthis.order_no + '&type=new',\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tuni.removeStorageSync('orderInfo')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttoBackPage(){\r\n\t\t\t\tthis.app.toBack()\r\n\t\t\t},\r\n\t\t\tcalculate() {\r\n\t\t\t\tlet sysInfo = uni.getSystemInfoSync()\r\n\t\t\t\tvar screenHeight = sysInfo.windowHeight;\r\n\t\t\t\t// 获取navbar的高度\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tthis.centerHeight = screenHeight - 122\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-WEIXIN || APP-PLUS\r\n\t\t\t\tthis.centerHeight = screenHeight - 122 - sysInfo.statusBarHeight\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t// 生成订单 选择支付方式\r\n\t\t\tcreateOrder() {\r\n\t\t\t\trequest({\r\n\t\t\t\t\turl: 'wx/add/order',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuser_ouid: this.userInfo.ouid,\r\n\t\t\t\t\t\t//用户ouid\r\n\t\t\t\t\t\tsite_detail: this.orderInfo.site_detail,\r\n\t\t\t\t\t\tgmt_site_use: this.orderInfo.gmt_site_use,\r\n\t\t\t\t\t\treserve_name: this.userName,\r\n\t\t\t\t\t\treserve_phone: this.phone,\r\n\t\t\t\t\t\tremark: this.remark\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tif (res.msg == '操作成功') {\r\n\t\t\t\t\t\tthis.order_no = res.data.order;\r\n\t\t\t\t\t\tthis.payMoney = res.data.money / 100; //需要支付的订单金额\r\n\t\t\t\t\t\tthis.showPop = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg + ',请重选',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tconst eventChannel = this.getOpenerEventChannel();\r\n\t\t\t\t\t\t\teventChannel.emit('updateSiteInfo', res.data.site)\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.app.toBack()\r\n\t\t\t\t\t\t\t}, 200)\r\n\t\t\t\t\t\t}, 1500)\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\t// 取消选择支付方式\r\n\t\t\tcancelPay() {\r\n\t\t\t\tthis.showPop = false;\r\n\t\t\t\tthis.payMoney = 0\r\n\t\t\t\tuni.removeStorageSync('orderInfo')\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: '/pages/orderDetail/orderDetail?order_no=' +\r\n\t\t\t\t\t\tthis.order_no + '&type=new',\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 确定支付\r\n\t\t\tasync toEnsurePay(index) {\r\n\t\t\t\tif (index == 0) {\r\n\t\t\t\t\tlet state = await this.balancePayment()\r\n\t\t\t\t\tif (state) {\r\n\t\t\t\t\t\tthis.showPop = false;\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle:  '支付成功' ,\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tthis.payMoney = 0\r\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\t\tuni.removeStorageSync('orderInfo')\r\n\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '/pages/orderDetail/orderDetail?order_no=' +\r\n\t\t\t\t\t\t\t\t\t\t\tthis.order_no + '&type=new',\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t},200)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showPop = false;\r\n\t\t\t\t\tthis.confirm()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 余额支付\r\n\t\t\tbalancePayment() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\trequest({\r\n\t\t\t\t\t\turl: 'wx/balance/pay',\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\torder_no: this.order_no,\r\n\t\t\t\t\t\t\tuser_ouid: this.userInfo.ouid\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\tresolve(true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t// 确定支付订单\r\n\t\t\tconfirm() {\r\n\t\t\t\tlet type = 'web'\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\ttype = 'h5'\r\n\t\t\t\t// #endif\r\n\t\t\t\trequest({\r\n\t\t\t\t\turl: 'wx/pay',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\torder_no: this.order_no,\r\n\t\t\t\t\t\ttype\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t// 微信小程序支付已走通，其余场景请自行进行支付对接\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\tthis.wxPay(res.data.per_pay, this.payComplete)\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tlet flag = this.isWeiXin()\r\n\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\t// 走微信内置浏览器支付\r\n\t\t\t\t\t\tthis.weChatInside()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 走外置浏览器支付\r\n\t\t\t\t\t\tthis.toPayOutside(res.data, this.order_no)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t\t// \tuni.removeStorageSync('orderInfo')\r\n\t\t\t\t\t// \tuni.redirectTo({\r\n\t\t\t\t\t// \t\turl: '/pages/orderDetail/orderDetail?order_no=' +\r\n\t\t\t\t\t// \t\t\tthis.order_no + '&type=new'\r\n\t\t\t\t\t// \t})\r\n\t\t\t\t\t// }, 1000);\r\n\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 取消支付\r\n\t\t\tcancel() {\r\n\t\t\t\tthis.show = false;\r\n\t\t\t\tuni.removeStorageSync('orderInfo')\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: '/pages/orderDetail/orderDetail?order_no=' + this.order_no + '&type=new'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 支付完成 或支付取消\r\n\t\t\tpayComplete(type) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: type == 'success' ? '支付成功' : '支付取消',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.removeStorageSync('orderInfo')\r\n\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\turl: '/pages/orderDetail/orderDetail?order_no=' +\r\n\t\t\t\t\t\t\t\t\tthis.order_no + '&type=new',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.page {\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #fff;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.centerContent {\r\n\t\tbackground-color: #f6f8fa;\r\n\t\toverflow-y: auto;\r\n\t}\r\n\r\n\t.reservationInfo {\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.reservationInfoTitle {\r\n\t\tfont-family: Alibaba PuHuiTi 2.0;\r\n\t\tfont-size: 17px;\r\n\t\tcolor: #000000;\r\n\t}\r\n\r\n\t.commonInfoLabel {\r\n\t\tfont-family: Alibaba PuHuiTi 2.0;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #000000;\r\n\t\tmargin-right: 31px;\r\n\t}\r\n\r\n\t.gymnasiumInfoBox {\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 10px;\r\n\t\tmargin-top: 8px;\r\n\t}\r\n\r\n\t.gymnasiumInfoBoxName {\r\n\t\tfont-size: 17px;\r\n\t}\r\n\r\n\t.gymnasiumInfoBoxText {\r\n\t\tfont-size: 14px;\r\n\t\tmargin-top: 11px;\r\n\t}\r\n\r\n\t.payMethodBox {\r\n\t\theight: 94rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 0 20rpx;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\t.footer {\r\n\t\theight: 78px;\r\n\t\tpadding: 0 20rpx 0 32rpx;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.totalText {\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: normal;\r\n\t\tline-height: normal;\r\n\t\tfont-feature-settings: 'kern' on;\r\n\t\tcolor: #9e9e9e;\r\n\t}\r\n\r\n\t.priceText {\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-feature-settings: 'kern' on;\r\n\t\tcolor: #ff5634;\r\n\t}\r\n\r\n\t.payBtn {\r\n\t\twidth: 200rpx;\r\n\t\theight: 70rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground: #ff5634;\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #ffffff;\r\n\t}\r\n\r\n\t.siteList {\r\n\t\tbackground-color: #fff;\r\n\t\tmargin-top: 14rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.siteListTitle {\r\n\t\tpadding: 20rpx 20rpx 0;\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 500;\r\n\t\tline-height: normal;\r\n\t\tletter-spacing: 0px;\r\n\t\tfont-feature-settings: 'kern' on;\r\n\t\tcolor: #333333;\r\n\t\tmargin-bottom: 24rpx;\r\n\t}\r\n\r\n\t.blackText {\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t\tline-height: normal;\r\n\t\tletter-spacing: 0px;\r\n\t\tfont-feature-settings: 'kern' on;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.grayText {\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: normal;\r\n\t\tline-height: normal;\r\n\t\ttext-align: right;\r\n\t\tletter-spacing: 0px;\r\n\t\tfont-feature-settings: 'kern' on;\r\n\t\tcolor: #9e9e9e;\r\n\t}\r\n\r\n\t.siteListItem {\r\n\t\twidth: 100%;\r\n\t\tmin-height: 140rpx;\r\n\t\theight: auto;\r\n\t\tborder-radius: 10rpx;\r\n\t\topacity: 1;\r\n\t\tbackground-color: #f6f8fa;\r\n\t\tpadding: 28rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\t::v-deep .input-placeholder {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #9e9e9e\r\n\t}\r\n</style>","import mod from \"-!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./confirmAppointment.vue?vue&type=style&index=0&id=f2065834&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./confirmAppointment.vue?vue&type=style&index=0&id=f2065834&scoped=true&lang=css&\""],"sourceRoot":""}