{"version":3,"sources":["uni-app:///main.js","webpack:///C:/project/轻羽开源项目客户端/qingyu/pages/reservationList/reservationList.vue?adc8","webpack:///C:/project/轻羽开源项目客户端/qingyu/pages/reservationList/reservationList.vue?c8cf","webpack:///C:/project/轻羽开源项目客户端/qingyu/pages/reservationList/reservationList.vue?c399","webpack:///C:/project/轻羽开源项目客户端/qingyu/pages/reservationList/reservationList.vue?4123","uni-app:///pages/reservationList/reservationList.vue","webpack:///C:/project/轻羽开源项目客户端/qingyu/pages/reservationList/reservationList.vue?a1c2"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uNavbar","uIcon","uTabs","uEmpty","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","g0","_self","_c","active","reservationList","length","g1","g2","waitUsedList","g3","g4","alreadyUsedList","g5","_isMounted","e0","app","toBack","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","titleList","name","scrollViewHeight","j","con","date","timeRange","searchInfo","pageObj","firstPage","secondPage","thirdPage","size","status","triggered","triggered1","triggered2","onLoad","onReady","methods","onChange","calculate","initData","type","userInfo","url","method","user_ouid","page","enumInfo","siteNum","hour","content","timeList","uni","icon","title","concat","onRefresh","lower","dealWithOrderState","toDetail","events","toChangeReservationState"],"mappings":"gKAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,4CACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,QAAS,WACP,OAAO,sHAITC,MAAO,WACL,OAAO,kHAITC,MAAO,WACL,OAAO,kHAITC,OAAQ,WACN,OAAO,qHAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACI,GAAdN,EAAIO,OAAcP,EAAIQ,gBAAgBC,OAAS,MACpDC,EAAmB,GAAdV,EAAIO,OAAcP,EAAIQ,gBAAgBC,OAAS,KACpDE,EACc,GAAdX,EAAIO,QAA8B,GAAdP,EAAIO,OAAcP,EAAIY,aAAaH,OAAS,KAChEI,EACc,GAAdb,EAAIO,QAA8B,GAAdP,EAAIO,OAAcP,EAAIY,aAAaH,OAAS,KAChEK,EACc,GAAdd,EAAIO,QAAgC,GAAdP,EAAIO,OAAeP,EAAIe,gBAAgBN,OAAS,KACtEO,EACc,GAAdhB,EAAIO,QAAgC,GAAdP,EAAIO,OAAeP,EAAIe,gBAAgBN,OAAS,KACrET,EAAIiB,aACPjB,EAAIkB,GAAKlB,EAAImB,IAAIC,QAEnBpB,EAAIqB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLrB,GAAIA,EACJM,GAAIA,EACJC,GAAIA,EACJE,GAAIA,EACJC,GAAIA,EACJE,GAAIA,MAKRU,GAAmB,EACnBC,EAAkB,GACtB5B,EAAO6B,eAAgB,G,iCC1EvB,yHAAs3B,eAAG,G,qJCqIz3B,S,EAGA,CACAN,gBACA,OACAH,SACAU,YACAC,WACA,CACAA,YACA,CACAA,aAEAvB,SACAK,gBACAG,mBACAP,mBACAuB,oBACAC,KACAC,KACAC,QACAC,cAEAC,YACAC,SACAC,YACAC,aACAC,aAEAC,QACAC,WAEAC,aACAC,cACAC,gBAMAC,kBACA,kBACA,iBAKAC,mBAAA,WACA,2BACA,kBAGAC,SAEAC,qBAEA,OADA,oBACA,SACA,OACA,0BACA,MACA,OACA,2BACA,6BACA,gBAEA,MACA,OACA,2BACA,gCACA,gBAEA,QAIAC,qBACA,4BACA,iBAMA,8CAIAC,oBAAA,+JAAAC,oCAAA,SACA,2BAAAC,UACA,cACAC,6BACAC,cACAjC,MACAkC,iBACAC,4DACA,+DACAhB,uBACAC,8BAEA,kKACA,uBAAAgB,SACAlD,6BACAA,uBACA,QACA,IACA,KACAyB,6CACAA,mCACA0B,KACAC,uBACAC,iCACAC,QACA5B,oBACAC,uBAIAF,YACAA,SACAA,aACAA,wDAEA,yBACA8B,aACAC,YACAC,kBAEA,KACA,gBACA,IADA,KACA,EAMA,IANA,KAMA,GAMA,IANA,KAMA,mBARA,OAHA,mCACAzD,uBACAA,GACA,4CAMA,OAHA,gCACAI,aACAsD,UACA,6CAMA,OAHA,mCACAnD,uBACAP,GACA,iFAGA,mDAjDA,IAiDA,0CA7DA,IAgEA2D,qBACA,oBACA,OACA,oCACA,kBACA,MACA,OACA,qCACA,mBACA,MACA,OACA,oCACA,mBACA,MAEA,0BAGAC,iBACA,oBACA,OACA,sEACA,MACA,OACA,wEACA,MACA,OACA,sEACA,MAEA,wBAGAC,+BAEA,mBACA,kDACA,wBAEA,SACA,mCACA,+CACA,wBAEA,MACA,mCAGA,CAEA,+CACA,wBAEA,SACA,8BACA,kDACA,wBAEA,OACA,uCAMAC,qBAAA,WACA,wCACAP,cACAT,yDACAiB,QACAC,qCACA,+BAMA,c,6DC1WA,yHAAqwC,eAAG,G","file":"pages/reservationList/reservationList.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/reservationList/reservationList.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./reservationList.vue?vue&type=template&id=1861ed1c&scoped=true&\"\nvar renderjs\nimport script from \"./reservationList.vue?vue&type=script&lang=js&\"\nexport * from \"./reservationList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./reservationList.vue?vue&type=style&index=0&id=1861ed1c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1861ed1c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/reservationList/reservationList.vue\"\nexport default component.exports","export * from \"-!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./reservationList.vue?vue&type=template&id=1861ed1c&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-navbar/u-navbar\" */ \"uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uTabs: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-tabs/u-tabs\" */ \"uview-ui/components/u-tabs/u-tabs.vue\"\n      )\n    },\n    uEmpty: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-empty/u-empty\" */ \"uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.active == 0 ? _vm.reservationList.length : null\n  var g1 = _vm.active == 0 ? _vm.reservationList.length : null\n  var g2 =\n    !(_vm.active == 0) && _vm.active == 1 ? _vm.waitUsedList.length : null\n  var g3 =\n    !(_vm.active == 0) && _vm.active == 1 ? _vm.waitUsedList.length : null\n  var g4 =\n    !(_vm.active == 0) && !(_vm.active == 1) ? _vm.alreadyUsedList.length : null\n  var g5 =\n    !(_vm.active == 0) && !(_vm.active == 1) ? _vm.alreadyUsedList.length : null\n  if (!_vm._isMounted) {\n    _vm.e0 = _vm.app.toBack\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./reservationList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./reservationList.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page\">\r\n\t\t<u-navbar class=\"nav-bar\" title=\"我的预约\" :safeAreaInsetTop=\"true\" :autoBack=\"false\" :fixed=\"false\">\r\n\t\t\t<template #left>\r\n\t\t\t\t<u-icon name=\"arrow-left\" @click=\"app.toBack\"></u-icon>\r\n\t\t\t</template>\r\n\t\t</u-navbar>\r\n\t\t<u-tabs class=\"tabs\" :list=\"titleList\" @change=\"onChange\" lineColor=\"#0077FF\" lineWidth=\"40\"></u-tabs>\r\n\t\t<scroll-view :scroll-y=\"true\" v-if=\"active == 0\" class=\"orderList\"\r\n\t\t\t:style=\"'height: ' + (scrollViewHeight + 'px') + ';'\" :class=\"reservationList.length == 0?'emptyFlex':''\"\r\n\t\t\trefresher-enabled :refresher-triggered=\"triggered\" @refresherrefresh=\"onRefresh\" @scrolltolower=\"lower\">\r\n\t\t\t<u-empty text=\"暂无预约\" v-if=\"reservationList.length == 0\" />\r\n\t\t\t<view v-else>\r\n\t\t\t\t<view class=\"orderItem\" :data-item=\"item\" v-for=\"(item, index1) in reservationList\" :key=\"index1\" @tap=\"toDetail\">\r\n\t\t\t\t\t<view class=\"flex align-center justify-between\">\r\n\t\t\t\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t\t\t\t<view class=\"leftPhoto\">\r\n\t\t\t\t\t\t\t\t<image class=\"w-full h-full\" :src=\"item.shop_avatar\" mode=\"\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex flex-direction align-start justify-between\" style=\"height: 132rpx\">\r\n\t\t\t\t\t\t\t\t<view class=\"gymnasiumName\">\r\n\t\t\t\t\t\t\t\t\t{{ item.shop_name }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"flex flex-direction align-start\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"reservationInfo\">预约场地： {{ item.siteNum }}场({{ item.hour }}小时）\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"flex align-start\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"reservationInfo\">预约时间：</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"flex flex-direction mutipleLine\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"reservationInfo align-center\" v-for=\"(con, j) in item.timeList\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:key=\"j\">{{ con.date }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ con.timeRange }}\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"flex align-center justify-end stateBox\">\r\n\t\t\t\t\t\t<view v-if=\"item.status == 'U'\" class=\"grayText\">已使用</view>\r\n\t\t\t\t\t\t<view v-else-if=\"item.status == 'Y'\" class=\"blueText\">待使用</view>\r\n\t\t\t\t\t\t<view v-else-if=\"item.status == 'N'\" class=\"redText\">待支付</view>\r\n\t\t\t\t\t\t<view v-else-if=\"item.status == 'C'\" class=\"grayText\">已取消</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"detailBox flex align-center\" @tap=\"toDetail\" :data-item=\"item\">\r\n\t\t\t\t\t\t查看预约\r\n\t\t\t\t\t\t<image src=\"/static/images/mine/rightArrow.svg\" style=\"width: 28rpx; height: 28rpx\" mode=\"\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t<scroll-view :scroll-y=\"true\" v-else-if=\"active == 1\" class=\"orderList\"\r\n\t\t\t:style=\"'height: ' + (scrollViewHeight + 'px') + ';'\" :class=\"waitUsedList.length == 0?'emptyFlex':''\"\r\n\t\t\t:refresher-triggered=\"triggered1\" refresher-enabled @refresherrefresh=\"onRefresh\" @scrolltolower=\"lower\">\r\n\t\t\t<u-empty text=\"暂无待使用预约\" v-if=\"waitUsedList.length == 0\" />\r\n\t\t\t<view v-else>\r\n\t\t\t\t<view class=\"orderItem\" :data-item=\"item\" v-for=\"(item, index1) in waitUsedList\" :key=\"index1\" @tap=\"toDetail\">\r\n\t\t\t\t\t<view class=\"flex align-center justify-between\">\r\n\t\t\t\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t\t\t\t<view class=\"leftPhoto\">\r\n\t\t\t\t\t\t\t\t<image class=\"w-full h-full\" :src=\"item.shop_avatar\" mode=\"\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex flex-direction align-start justify-between\" style=\"height: 132rpx\">\r\n\t\t\t\t\t\t\t\t<view class=\"gymnasiumName\">\r\n\t\t\t\t\t\t\t\t\t{{ item.shop_name }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"flex flex-direction align-start\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"reservationInfo\">预约场地： {{ item.siteNum }}场({{ item.hour }}小时）\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"flex align-start\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"reservationInfo\">预约时间：</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"flex flex-direction mutipleLine\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"reservationInfo align-center\" v-for=\"(con, j) in item.timeList\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:key=\"j\">{{ con.date }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ con.timeRange }}\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex align-center justify-end stateBox\">\r\n\t\t\t\t\t\t<view class=\"blueText\">待使用</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"detailBox flex align-center\" @tap=\"toDetail\" :data-item=\"item\">\r\n\t\t\t\t\t\t查看预约\r\n\t\t\t\t\t\t<image src=\"/static/images/mine/rightArrow.svg\" style=\"width: 28rpx; height: 28rpx\" mode=\"\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t<scroll-view :scroll-y=\"true\" v-else class=\"orderList\" :style=\"'height: ' + (scrollViewHeight + 'px') + ';'\"\r\n\t\t\t:class=\"alreadyUsedList.length == 0?'emptyFlex':''\" :refresher-triggered=\"triggered2\" refresher-enabled\r\n\t\t\t@refresherrefresh=\"onRefresh\" @scrolltolower=\"lower\">\r\n\t\t\t<u-empty text=\"暂无已使用预约\" v-if=\"alreadyUsedList.length == 0\" />\r\n\t\t\t<view v-else>\r\n\t\t\t\t<view class=\"orderItem\" :data-item=\"item\" v-for=\"(item, index1) in alreadyUsedList\" :key=\"index1\" @tap=\"toDetail\">\r\n\t\t\t\t\t<view class=\"flex align-center justify-between\">\r\n\t\t\t\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t\t\t\t<view class=\"leftPhoto\">\r\n\t\t\t\t\t\t\t\t<image class=\"w-full h-full\" :src=\"item.shop_avatar\" mode=\"\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex flex-direction align-start justify-between\" style=\"height: 132rpx\">\r\n\t\t\t\t\t\t\t\t<view class=\"gymnasiumName\">\r\n\t\t\t\t\t\t\t\t\t{{ item.shop_name }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"flex flex-direction align-start\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"reservationInfo\">预约场地： {{ item.siteNum }}场({{ item.hour }}小时）\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"reservationInfo\">预约时间： {{ item.reservationTime }}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"flex align-center justify-end stateBox\">\r\n\t\t\t\t\t\t<view class=\"grayText\">已使用</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"detailBox flex align-center\" @tap=\"toDetail\" :data-item=\"item\">\r\n\t\t\t\t\t\t查看预约\r\n\t\t\t\t\t\t<image src=\"/static/images/mine/rightArrow.svg\" style=\"width: 28rpx; height: 28rpx\" mode=\"\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\trequest\r\n\t} from '../../utils/request';\r\n\texport default ({\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tapp:null,\r\n\t\t\t\ttitleList: [{\r\n\t\t\t\t\tname: '全部'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: '待使用'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: '已使用'\r\n\t\t\t\t}], //tab数据\r\n\t\t\t\tactive: 0, //tab当前选中\r\n\t\t\t\twaitUsedList: [], //待使用列表\r\n\t\t\t\talreadyUsedList: [], //已使用列表\r\n\t\t\t\treservationList: [], //全部列表\r\n\t\t\t\tscrollViewHeight: '', //列表页高度\r\n\t\t\t\tj: '',\r\n\t\t\t\tcon: {\r\n\t\t\t\t\tdate: '',\r\n\t\t\t\t\ttimeRange: ''\r\n\t\t\t\t},\r\n\t\t\t\tsearchInfo: {\r\n\t\t\t\t\tpageObj: {\r\n\t\t\t\t\t\tfirstPage: 1,\r\n\t\t\t\t\t\tsecondPage: 1,\r\n\t\t\t\t\t\tthirdPage: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize: 10,\r\n\t\t\t\t\tstatus: ''\r\n\t\t\t\t}, //搜索条件\r\n\t\t\t\ttriggered: false, //控制全部列表 下拉刷新\r\n\t\t\t\ttriggered1: false, //控制待使用列表 下拉刷新\r\n\t\t\t\ttriggered2: false //控制已使用列表 下拉刷新\r\n\t\t\t};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生命周期函数--监听页面加载\r\n\t\t */\r\n\t\tonLoad() {\r\n\t\t\tthis.app = getApp()\r\n\t\t\tthis.initData();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生命周期函数--监听页面初次渲染完成\r\n\t\t */\r\n\t\tonReady() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.calculate();\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// tab栏切换\r\n\t\t\tonChange(e) {\r\n\t\t\t\tthis.active = e.index\r\n\t\t\t\tswitch (e.index) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tthis.searchInfo.status = ''\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tthis.searchInfo.status = 'Y'\r\n\t\t\t\t\t\tif (this.waitUsedList.length == 0) {\r\n\t\t\t\t\t\t\tthis.initData()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tthis.searchInfo.status = 'U'\r\n\t\t\t\t\t\tif (this.alreadyUsedList.length == 0) {\r\n\t\t\t\t\t\t\tthis.initData()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 计算scroll-view高度\r\n\t\t\tcalculate() {\r\n\t\t\t\tlet sysInfo = uni.getSystemInfoSync()\r\n\t\t\t\tvar screenHeight = sysInfo.windowHeight;\r\n\t\t\t\t// 获取navbar的高度\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tthis.scrollViewHeight = screenHeight - 88\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-WEIXIN || APP-PLUS\r\n\t\t\t\tthis.scrollViewHeight = screenHeight - 88 - sysInfo.statusBarHeight\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t// 初始化数据\r\n\t\t\tasync initData(type = '') {\r\n\t\t\t\tlet userInfo = await this.app.getUserInfo();\r\n\t\t\t\trequest({\r\n\t\t\t\t\turl: 'wx/get/my/reserve/list',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuser_ouid: userInfo.ouid,\r\n\t\t\t\t\t\tpage: this.active == 0 ? this.searchInfo.pageObj.firstPage : (this.active == 1 ?\r\n\t\t\t\t\t\t\tthis.searchInfo.pageObj.secondPage : this.searchInfo.pageObj.thirdPage),\r\n\t\t\t\t\t\tsize: this.searchInfo.size,\r\n\t\t\t\t\t\tstatus: this.searchInfo.status\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(async (res) => {\r\n\t\t\t\t\tlet enumInfo = await this.app.getEnum();\r\n\t\t\t\t\tlet reservationList = res.data.list ? res.data.list : [];\r\n\t\t\t\t\treservationList.forEach((con) => {\r\n\t\t\t\t\t\tlet siteNum = 0; //预约场地数\r\n\t\t\t\t\t\tlet hour = 0; //所有预约的时间总和\r\n\t\t\t\t\t\tlet timeList = []; //预约时间的集合\r\n\t\t\t\t\t\tcon.site_detail = con.site_detail ? con.site_detail : [];\r\n\t\t\t\t\t\tcon.site_detail.forEach((content) => {\r\n\t\t\t\t\t\t\tsiteNum = siteNum + 1;\r\n\t\t\t\t\t\t\thour = content.time_enum.length + hour;\r\n\t\t\t\t\t\t\tcontent.time_enum.forEach((contentItem) => {\r\n\t\t\t\t\t\t\t\ttimeList.push({\r\n\t\t\t\t\t\t\t\t\tdate: con.reserve_date,\r\n\t\t\t\t\t\t\t\t\ttimeRange: enumInfo[contentItem]\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcon.siteNum = siteNum;\r\n\t\t\t\t\t\tcon.hour = hour;\r\n\t\t\t\t\t\tcon.timeList = timeList;\r\n\t\t\t\t\t\tcon.shop_avatar = this.app.globalData.httpUrl + con.shop_avatar\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (reservationList.length < 10 && type == 'lower') {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: '没有更多数据了'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (this.active) {\r\n\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\tthis.reservationList = (type == 'refresh' ? reservationList : this\r\n\t\t\t\t\t\t\t\t.reservationList.concat(\r\n\t\t\t\t\t\t\t\t\treservationList))\r\n\t\t\t\t\t\t\tthis.triggered = false\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\tthis.waitUsedList = (type == 'refresh' ? reservationList : this\r\n\t\t\t\t\t\t\t\t.waitUsedList\r\n\t\t\t\t\t\t\t\t.concat(reservationList))\r\n\t\t\t\t\t\t\tthis.triggered1 = false\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tthis.alreadyUsedList = (type == 'refresh' ? reservationList : this\r\n\t\t\t\t\t\t\t\t.alreadyUsedList.concat(\r\n\t\t\t\t\t\t\t\t\treservationList))\r\n\t\t\t\t\t\t\tthis.triggered2 = false\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 下拉刷新\r\n\t\t\tonRefresh() {\r\n\t\t\t\tswitch (this.active) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tthis.searchInfo.pageObj.firstPage = 1;\r\n\t\t\t\t\t\tthis.triggered = true\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tthis.searchInfo.pageObj.secondPage = 1;\r\n\t\t\t\t\t\tthis.triggered1 = true\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tthis.searchInfo.pageObj.thirdPage = 1;\r\n\t\t\t\t\t\tthis.triggered2 = true\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.initData('refresh');\r\n\t\t\t},\r\n\t\t\t// 上拉加载\r\n\t\t\tlower() {\r\n\t\t\t\tswitch (this.active) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tthis.searchInfo.pageObj.firstPage = this.searchInfo.pageObj.firstPage + 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tthis.searchInfo.pageObj.secondPage = this.searchInfo.pageObj.secondPage + 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tthis.searchInfo.pageObj.thirdPage = this.searchInfo.pageObj.thirdPage + 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.initData('lower')\r\n\t\t\t},\r\n\t\t\t// 修改预约状态\r\n\t\t\tdealWithOrderState(order_no) {\r\n\t\t\t\t// 全部模块\r\n\t\t\t\tif (this.active == 0) {\r\n\t\t\t\t\tlet index = this.reservationList.findIndex(item => {\r\n\t\t\t\t\t\treturn item.order_no == order_no;\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (index > -1) {\r\n\t\t\t\t\t\tthis.reservationList[index].status = 'C';\r\n\t\t\t\t\t\tlet resI = this.waitUsedList.findIndex(item => {\r\n\t\t\t\t\t\t\treturn item.order_no == order_no;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (resI > -1) {\r\n\t\t\t\t\t\t\tthis.waitUsedList.splice(resI, 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 待使用模块\r\n\t\t\t\t\tlet index = this.waitUsedList.findIndex(item => {\r\n\t\t\t\t\t\treturn item.order_no == order_no;\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (index > -1) {\r\n\t\t\t\t\t\tthis.waitUsedList.splice(index, 1)\r\n\t\t\t\t\t\tlet resI = this.reservationList.findIndex(item => {\r\n\t\t\t\t\t\t\treturn item.order_no == order_no;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (resI > -1) {\r\n\t\t\t\t\t\t\tthis.reservationList[resI].status = 'C'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 去详情页\r\n\t\t\ttoDetail(e) {\r\n\t\t\t\tlet order_no = e.currentTarget.dataset.item.order_no;\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/reservationInfo/reservationInfo?order_no=' + order_no,\r\n\t\t\t\t\tevents: {\r\n\t\t\t\t\t\ttoChangeReservationState: (order_no) => {\r\n\t\t\t\t\t\t\tthis.dealWithOrderState(order_no)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t}\r\n\t});\r\n</script>\r\n<style scoped>\r\n\t.page {\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f6f8fa;\r\n\t}\r\n\r\n\t.orderList {\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.emptyFlex {\r\n\t\tpadding-top: 100px;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.orderItem {\r\n\t\theight: 176rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tbackground-color: #fff;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.orderNoText {\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 24rpx;\r\n\t\tdisplay: flex;\r\n\t\tcolor: #b1b4c3;\r\n\t}\r\n\r\n\t.leftPhoto {\r\n\t\twidth: 132rpx;\r\n\t\theight: 132rpx;\r\n\t\tborder-radius: 4rpx;\r\n\t\tmargin: 0rpx 20rpx 0rpx 0;\r\n\t}\r\n\r\n\t.gymnasiumName {\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 500;\r\n\t\tfont-feature-settings: 'kern' on;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.reservationInfo {\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 20rpx;\r\n\t\tfont-weight: 500;\r\n\t\tfont-feature-settings: 'kern' on;\r\n\t\tcolor: #9e9e9e;\r\n\t\tmargin-bottom: 4rpx;\r\n\t}\r\n\r\n\t.mutipleLine {\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\t-webkit-line-clamp: 1;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.borderBtn {\r\n\t\twidth: 152rpx;\r\n\t\theight: 50rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tborder: 1px solid #b1b4c3;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #b1b4c3;\r\n\t}\r\n\r\n\t.payBtn {\r\n\t\twidth: 152rpx;\r\n\t\theight: 50rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: #ff5634;\r\n\t\tmargin-left: 12rpx;\r\n\t}\r\n\r\n\t.useBtn {\r\n\t\twidth: 152rpx;\r\n\t\theight: 50rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground-color: #0077ff;\r\n\t\tmargin-left: 12rpx;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.redText {\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-feature-settings: 'kern' on;\r\n\t\tcolor: #ff5634;\r\n\t}\r\n\r\n\t.blueText {\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-feature-settings: 'kern' on;\r\n\t\tcolor: #0077ff;\r\n\t}\r\n\r\n\t.grayText {\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-feature-settings: 'kern' on;\r\n\t\tcolor: #b1b4c3;\r\n\t}\r\n\r\n\t.stateBox {\r\n\t\tposition: absolute;\r\n\t\tright: 16rpx;\r\n\t\ttop: 22rpx;\r\n\t}\r\n\r\n\t.detailBox {\r\n\t\tfont-family: Alibaba PuHuiTi 2;\r\n\t\tfont-size: 20rpx;\r\n\t\tfont-feature-settings: 'kern' on;\r\n\t\tcolor: #b1b4c3;\r\n\t\tposition: absolute;\r\n\t\tright: 8rpx;\r\n\t\tbottom: 18rpx;\r\n\t}\r\n</style>","import mod from \"-!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./reservationList.vue?vue&type=style&index=0&id=1861ed1c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Users/User/Downloads/HBuilderX.3.4.15.20220610/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./reservationList.vue?vue&type=style&index=0&id=1861ed1c&scoped=true&lang=css&\""],"sourceRoot":""}